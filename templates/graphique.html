<html>
  <head>
    <meta charset="UTF-8" />
    <title>Graphique</title>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <style>
      #chart_div {
        width: 100%;
        height: 100%;
      }
      body {
        margin: 0;
        padding: 0;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        background-color: #f1f8e9;
      }
    </style>
  </head>  

  <body>
    <div id="chart_div"></div>
    <script>
      google.charts.load('current', {packages: ['corechart', 'line']});
      google.charts.setOnLoadCallback(drawBackgroundColor);

      function drawBackgroundColor() {
        fetch('/paris/')
          .then(response => response.text())
          .then(data => {
            alert(data.substring(12, data.length - 21));
            var parsedData = JSON.parse(data.substring(12, data.length - 21));
            var data = new google.visualization.DataTable();
            data.addColumn('number', 'X');
            data.addColumn('number', 'Temp');
            data.addRows(parsedData);

            var options = {
              hAxis: {
                title: 'Date',
                textStyle: {
                  color: '#333',
                  fontSize: 14,
                  bold: true
                }
              },
              vAxis: {
                title: 'TempÃ©rature',
                textStyle: {
                  color: '#333',
                  fontSize: 14,
                  bold: true
                }
              },
              backgroundColor: 'transparent'
            };

            var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
            chart.draw(data, options);
          })
          .catch((error) => {
            console.error('Erreur:', error);
          });
      }
    </script>
  </body>
</html>
